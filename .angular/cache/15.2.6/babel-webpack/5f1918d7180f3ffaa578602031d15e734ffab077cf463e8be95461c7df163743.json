{"ast":null,"code":"import { NavigationEnd } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"ngx-pagination\";\nimport * as i5 from \"../../header-user/header-user.component\";\nconst _c0 = function (a0, a1) {\n  return {\n    \"on\": a0,\n    \"off\": a1\n  };\n};\nfunction UserPageComponent_tr_31_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 16)(1, \"td\", 17);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 18);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 18);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 18)(8, \"label\", 19);\n    i0.ɵɵlistener(\"click\", function UserPageComponent_tr_31_Template_label_click_8_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const post_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.handleClick($event, post_r1.idcomment, post_r1.status));\n    });\n    i0.ɵɵelement(9, \"input\", 20)(10, \"span\", 21);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const post_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(post_r1.comment);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(post_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(post_r1.brandManager);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"checked\", post_r1.status);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(5, _c0, post_r1.status, !post_r1.status));\n  }\n}\nconst _c1 = function (a0, a1, a2) {\n  return {\n    itemsPerPage: a0,\n    currentPage: a1,\n    totalItems: a2\n  };\n};\nexport class UserPageComponent {\n  //check for sort \n  onTableDataChange(event) {\n    this.page = event;\n  }\n  constructor(http, router) {\n    this.http = http;\n    this.router = router;\n    this.page = 1;\n    this.count = 0;\n    this.tableSize = 4;\n    this.status = true;\n    //getAll comment\n    this.allComment = [];\n    //sort comment\n    this.sortAscendingComment = true; // Indicates whether to sort in ascending order (A-Z)\n    this.sortAscendingCompany = true; // Indicates whether to sort in ascending order (A-Z)\n    this.sortAscendingBrandManager = true; // Indicates whether to sort in ascending order (A-Z)\n  }\n\n  handleClick(event, commentId, status) {\n    // Check if the event has already been handled\n    if (event.defaultPrevented) {\n      return;\n    }\n    // Prevent the event from being handled again\n    event.preventDefault();\n    // Call toggleSwitch()\n    this.toggleSwitch(commentId, status);\n  }\n  // update to sql when web reload \n  UpdateToDatabase() {\n    console.log(\"update to database()\");\n    this.http.put('http://localhost:5000/UpdateComment', this.allComment) //[{},{},{}]\n    .subscribe(response => {\n      console.log(\"PUT : \", response);\n    });\n  }\n  toggleSwitch(commentId, status) {\n    const commentIndex = this.allComment.findIndex(comment => comment.idcomment === commentId); // find the index of the comment with matching comment ID\n    if (commentIndex > -1) {\n      // check if commentIndex is a valid index\n      this.allComment[commentIndex].status = !status; // toggle the status of the comment at the found index\n    }\n\n    console.log(this.allComment);\n  }\n  getAllComment() {\n    this.http.get('http://localhost:5000/getComment').subscribe(response => {\n      this.allComment = response;\n      console.log(this.allComment);\n    });\n  }\n  detectPageRefresh(event) {\n    if (!event || event.type === 'beforeunload') {\n      this.UpdateToDatabase();\n      this.getAllComment();\n    }\n    console.log(\"refress\");\n  }\n  ngOnInit() {\n    this.detectPageRefresh();\n    // update to database when url change\n    this.router.events.subscribe(event => {\n      if (event instanceof NavigationEnd) {\n        // The page URL has changed, call your function here\n        this.UpdateToDatabase();\n        this.getAllComment();\n      }\n    });\n    // get all comment\n    this.getAllComment();\n  }\n  sortComment() {\n    if (this.sortAscendingComment) {\n      this.allComment.sort((a, b) => a.comment.charAt(0).localeCompare(b.comment.charAt(0), undefined, {\n        sensitivity: 'base'\n      }));\n    } else {\n      this.allComment.sort((a, b) => b.comment.charAt(0).localeCompare(a.comment.charAt(0), undefined, {\n        sensitivity: 'base'\n      }));\n    }\n    this.sortAscendingComment = !this.sortAscendingComment;\n  }\n  //sort Company\n  sortCompany() {\n    if (this.sortAscendingCompany) {\n      this.allComment.sort((a, b) => a.name.charAt(0).localeCompare(b.name.charAt(0), undefined, {\n        sensitivity: 'base'\n      }));\n    } else {\n      this.allComment.sort((a, b) => b.name.charAt(0).localeCompare(a.name.charAt(0), undefined, {\n        sensitivity: 'base'\n      }));\n    }\n    this.sortAscendingCompany = !this.sortAscendingCompany;\n  }\n  //sort BrandManager\n  sortBrandManager() {\n    if (this.sortAscendingBrandManager) {\n      this.allComment.sort((a, b) => a.brandManager.charAt(0).localeCompare(b.brandManager.charAt(0), undefined, {\n        sensitivity: 'base'\n      }));\n    } else {\n      this.allComment.sort((a, b) => b.brandManager.charAt(0).localeCompare(a.brandManager.charAt(0), undefined, {\n        sensitivity: 'base'\n      }));\n    }\n    this.sortAscendingBrandManager = !this.sortAscendingBrandManager;\n  }\n}\nUserPageComponent.ɵfac = function UserPageComponent_Factory(t) {\n  return new (t || UserPageComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.Router));\n};\nUserPageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: UserPageComponent,\n  selectors: [[\"app-user-page\"]],\n  hostBindings: function UserPageComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"beforeunload\", function UserPageComponent_beforeunload_HostBindingHandler($event) {\n        return ctx.detectPageRefresh($event);\n      }, false, i0.ɵɵresolveWindow);\n    }\n  },\n  decls: 35,\n  vars: 8,\n  consts: [[1, \"px-[103px]\", \"pt-[40px]\", \"max-md:px-[24px]\", \"pb-[20px]\"], [1, \"table-fixed\", \"px-[46px]\", \"py-[16px]\", \"rounded-[20px]\", \"w-full\", \"shadow-[0_4px_4px_rgba(0,0,0,0.25)]\", \"max-md:px-7\"], [1, \"text-[26px]\", \"text-blue-3\", \"font-medium\", \"font-urbanist\", \"max-md:text-[16px]\"], [1, \"relative\", \"overflow-x-auto\", \"py-[18px]\", \"max-md:overflow-scroll\"], [1, \"w-full\", \"text-[19px]\", \"text-left\"], [1, \"text-lg\", \"text-white\", \"bg-blue-2\", \"border-[1px]\", \"border-blue-2\", \"rounded-lg\"], [1, \"max-md:text-[14px]\", \"font-urbanist\"], [\"scope\", \"col\", 1, \"px-6\", \"py-3\"], [1, \"cursor-pointer\", \"px-6\", \"py-3\", 3, \"click\"], [1, \"ri-arrow-up-down-fill\"], [1, \"flex\", \"justify-between\", \"items-center\"], [1, \"max-md:mx-3\", \"cursor-pointer\", 3, \"click\"], [1, \"sr-only\"], [\"class\", \"text-black-1 font-urbanist border-[1px] border-blue-1 max-md:text-sm\", 4, \"ngFor\", \"ngForOf\"], [1, \"pagination\", \"pt-[2px]\", \"pb-[51px]\", \"flex\", \"justify-end\", \"max-md:pb-3\", \"max-md:justify-center\"], [\"previousLabel\", \"Prev\", \"nextLabel\", \"Next\", 3, \"pageChange\"], [1, \"text-black-1\", \"font-urbanist\", \"border-[1px]\", \"border-blue-1\", \"max-md:text-sm\"], [\"scope\", \"row\", \"colspan\", \"2\", 1, \"px-6\", \"py-4\", \"font-sm\"], [1, \"px-6\", \"py-4\"], [1, \"switch\", 3, \"click\"], [\"type\", \"checkbox\", 3, \"checked\"], [1, \"slider\", 3, \"ngClass\"]],\n  template: function UserPageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-header-user\");\n      i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2);\n      i0.ɵɵtext(4, \"USER\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\", 3)(6, \"table\", 4)(7, \"thead\", 5)(8, \"tr\", 6)(9, \"th\", 7)(10, \"div\");\n      i0.ɵɵtext(11, \"Comment\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"th\")(13, \"div\", 8);\n      i0.ɵɵlistener(\"click\", function UserPageComponent_Template_div_click_13_listener() {\n        return ctx.sortComment();\n      });\n      i0.ɵɵelement(14, \"i\", 9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"th\", 7)(16, \"div\", 10)(17, \"div\");\n      i0.ɵɵtext(18, \"Company\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"div\", 11);\n      i0.ɵɵlistener(\"click\", function UserPageComponent_Template_div_click_19_listener() {\n        return ctx.sortCompany();\n      });\n      i0.ɵɵelement(20, \"i\", 9);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(21, \"th\", 7)(22, \"div\", 10)(23, \"div\");\n      i0.ɵɵtext(24, \"Brand Manager\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"div\", 11);\n      i0.ɵɵlistener(\"click\", function UserPageComponent_Template_div_click_25_listener() {\n        return ctx.sortBrandManager();\n      });\n      i0.ɵɵelement(26, \"i\", 9);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(27, \"th\", 7)(28, \"span\", 12);\n      i0.ɵɵtext(29, \"Action\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(30, \"tbody\");\n      i0.ɵɵtemplate(31, UserPageComponent_tr_31_Template, 11, 8, \"tr\", 13);\n      i0.ɵɵpipe(32, \"paginate\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(33, \"div\", 14)(34, \"pagination-controls\", 15);\n      i0.ɵɵlistener(\"pageChange\", function UserPageComponent_Template_pagination_controls_pageChange_34_listener($event) {\n        return ctx.onTableDataChange($event);\n      });\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(31);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(32, 1, ctx.allComment, i0.ɵɵpureFunction3(4, _c1, ctx.tableSize, ctx.page, ctx.count)));\n    }\n  },\n  dependencies: [i3.NgClass, i3.NgForOf, i4.PaginationControlsComponent, i5.HeaderUserComponent, i4.PaginatePipe],\n  styles: [\"var[_ngcontent-%COMP%]   resource[_ngcontent-%COMP%];\\n (()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  { // webpackBootstrap\\n \\tvar __webpack_modules__ = ({\\n\\n 987:\\n\\n (() => {\\n\\nthrow new Error(\\\"Module build failed (from ./node_modules/postcss-loader/dist/cjs.js):\\\\nC:\\\\\\\\Users\\\\\\\\sarif\\\\\\\\Desktop\\\\\\\\guardian\\\\\\\\tailwind.config.js:19\\\\n      \\\\\\\"gre\\\\\\\"\\\\n      ^^^^^\\\\n\\\\nSyntaxError: Unexpected string\\\\n    at new Script (node:vm:100:7)\\\\n    at createScript (node:vm:259:10)\\\\n    at Object.runInThisContext (node:vm:307:10)\\\\n    at jiti (C:\\\\\\\\Users\\\\\\\\sarif\\\\\\\\Desktop\\\\\\\\guardian\\\\\\\\node_modules\\\\\\\\jiti\\\\\\\\dist\\\\\\\\jiti.js:1:245595)\\\\n    at C:\\\\\\\\Users\\\\\\\\sarif\\\\\\\\Desktop\\\\\\\\guardian\\\\\\\\node_modules\\\\\\\\tailwindcss\\\\\\\\lib\\\\\\\\lib\\\\\\\\load-config.js:35:30\\\\n    at loadConfig (C:\\\\\\\\Users\\\\\\\\sarif\\\\\\\\Desktop\\\\\\\\guardian\\\\\\\\node_modules\\\\\\\\tailwindcss\\\\\\\\lib\\\\\\\\lib\\\\\\\\load-config.js:37:6)\\\\n    at getTailwindConfig (C:\\\\\\\\Users\\\\\\\\sarif\\\\\\\\Desktop\\\\\\\\guardian\\\\\\\\node_modules\\\\\\\\tailwindcss\\\\\\\\lib\\\\\\\\lib\\\\\\\\setupTrackingContext.js:69:118)\\\\n    at C:\\\\\\\\Users\\\\\\\\sarif\\\\\\\\Desktop\\\\\\\\guardian\\\\\\\\node_modules\\\\\\\\tailwindcss\\\\\\\\lib\\\\\\\\lib\\\\\\\\setupTrackingContext.js:97:92\\\\n    at C:\\\\\\\\Users\\\\\\\\sarif\\\\\\\\Desktop\\\\\\\\guardian\\\\\\\\node_modules\\\\\\\\tailwindcss\\\\\\\\lib\\\\\\\\processTailwindFeatures.js:46:11\\\\n    at plugins (C:\\\\\\\\Users\\\\\\\\sarif\\\\\\\\Desktop\\\\\\\\guardian\\\\\\\\node_modules\\\\\\\\tailwindcss\\\\\\\\lib\\\\\\\\plugin.js:38:63)\\\\n    at LazyResult.runOnRoot (C:\\\\\\\\Users\\\\\\\\sarif\\\\\\\\Desktop\\\\\\\\guardian\\\\\\\\node_modules\\\\\\\\postcss\\\\\\\\lib\\\\\\\\lazy-result.js:339:16)\\\\n    at LazyResult.runAsync (C:\\\\\\\\Users\\\\\\\\sarif\\\\\\\\Desktop\\\\\\\\guardian\\\\\\\\node_modules\\\\\\\\postcss\\\\\\\\lib\\\\\\\\lazy-result.js:393:26)\\\\n    at LazyResult.async (C:\\\\\\\\Users\\\\\\\\sarif\\\\\\\\Desktop\\\\\\\\guardian\\\\\\\\node_modules\\\\\\\\postcss\\\\\\\\lib\\\\\\\\lazy-result.js:221:30)\\\\n    at LazyResult.then (C:\\\\\\\\Users\\\\\\\\sarif\\\\\\\\Desktop\\\\\\\\guardian\\\\\\\\node_modules\\\\\\\\postcss\\\\\\\\lib\\\\\\\\lazy-result.js:206:17)\\\");\\n\\n })\\n\\n \\t});\\n\\n \\t\\n \\t// startup\\n \\t// Load entry module and return exports\\n \\t// This entry module doesn't tell about it's top-level declarations so it can't be inlined\\n \\tvar __webpack_exports__ = {};\\n \\t__webpack_modules__[987]();\\n \\tresource = __webpack_exports__;\\n \\t\\n })()\\n;\\n/*# sourceMappingURL=user-page.component.css.map*/\"]\n});","map":{"version":3,"mappings":"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","names":["NavigationEnd","i0","UserPageComponent","onTableDataChange","event","page","constructor","http","router","handleClick","commentId","status","defaultPrevented","preventDefault","toggleSwitch","UpdateToDatabase","console","log","put","allComment","subscribe","response","commentIndex","findIndex","comment","idcomment","getAllComment","get","detectPageRefresh","type","ngOnInit","events","sortComment","sortAscendingComment","sort","a","b","charAt","localeCompare","undefined","sensitivity","sortCompany","sortAscendingCompany","name","sortBrandManager","sortAscendingBrandManager","brandManager","selectors","hostBindings","ctx"],"sourceRoot":"","sources":["C:\\Users\\sarif\\Desktop\\guardian\\src\\app\\menu_page\\user-page\\user-page.component.ts","C:\\Users\\sarif\\Desktop\\guardian\\src\\app\\menu_page\\user-page\\user-page.component.html"],"sourcesContent":["import { Component,OnInit,HostListener   } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Router, NavigationEnd } from '@angular/router';\r\n\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'app-user-page',\r\n  templateUrl: './user-page.component.html',\r\n  styleUrls: ['./user-page.component.css']\r\n})\r\nexport class UserPageComponent implements OnInit{\r\n\r\n  POST:any;\r\n  page:number = 1;\r\n  count:number = 0;\r\n  tableSize :number = 4;\r\n  status:boolean = true;\r\n  //getAll comment\r\n  allComment:any[] = []\r\n  //check for sort \r\n  \r\n  \r\n  onTableDataChange(event : any)\r\n  {\r\n    this.page = event\r\n  }\r\n  constructor(private http: HttpClient,private router:Router) { }\r\n\r\n  handleClick(event: Event, commentId: number, status: boolean): void {\r\n    // Check if the event has already been handled\r\n    if (event.defaultPrevented) {\r\n      return;\r\n    }\r\n  \r\n    // Prevent the event from being handled again\r\n    event.preventDefault();\r\n  \r\n    // Call toggleSwitch()\r\n    this.toggleSwitch(commentId, status);\r\n  }\r\n  \r\n\r\n\r\n\r\n  // update to sql when web reload \r\n  UpdateToDatabase(){\r\n    console.log(\"update to database()\")\r\n    this.http.put('http://localhost:5000/UpdateComment', this.allComment)//[{},{},{}]\r\n        .subscribe((response) => {\r\n          console.log(\"PUT : \",response);\r\n      });\r\n  }\r\n  \r\n\r\n  toggleSwitch(commentId: number, status: boolean): void {\r\n    const commentIndex = this.allComment.findIndex(comment => comment.idcomment === commentId); // find the index of the comment with matching comment ID\r\n    if (commentIndex > -1) { // check if commentIndex is a valid index\r\n      this.allComment[commentIndex].status = !status; // toggle the status of the comment at the found index\r\n    }\r\n    console.log(this.allComment)\r\n\r\n  }\r\n  \r\n  \r\n    \r\n  getAllComment(): void {\r\n\r\n    this.http.get<any[]>('http://localhost:5000/getComment').subscribe(response => {  \r\n      this.allComment = response\r\n      console.log(this.allComment);\r\n    });\r\n  }\r\n\r\n  @HostListener('window:beforeunload', ['$event'])\r\n  detectPageRefresh(event?: Event) {\r\n    if (!event || event.type === 'beforeunload') {\r\n      this.UpdateToDatabase();\r\n      this.getAllComment()\r\n    }\r\n    console.log(\"refress\")\r\n  }\r\n\r\n  ngOnInit():void {\r\n\r\n    this.detectPageRefresh();\r\n\r\n    // update to database when url change\r\n    this.router.events.subscribe(event => {\r\n      if (event instanceof NavigationEnd) {\r\n\r\n        // The page URL has changed, call your function here\r\n        this.UpdateToDatabase();\r\n        this.getAllComment()\r\n      }\r\n    });\r\n    \r\n    // get all comment\r\n    this.getAllComment()\r\n  }\r\n\r\n\r\n\r\n\r\n  //sort comment\r\n  sortAscendingComment:boolean = true;  // Indicates whether to sort in ascending order (A-Z)\r\n  sortAscendingCompany:boolean = true;  // Indicates whether to sort in ascending order (A-Z)\r\n  sortAscendingBrandManager:boolean = true;  // Indicates whether to sort in ascending order (A-Z)\r\n  sortComment(){\r\n    if(this.sortAscendingComment)\r\n    {\r\n      this.allComment.sort((a, b) => a.comment.charAt(0).localeCompare(b.comment.charAt(0),undefined, { sensitivity: 'base' }));\r\n    }\r\n    else\r\n    {\r\n      this.allComment.sort((a, b) => b.comment.charAt(0).localeCompare(a.comment.charAt(0),undefined, { sensitivity: 'base' }));\r\n    }\r\n    this.sortAscendingComment = !this.sortAscendingComment\r\n\r\n  }\r\n  //sort Company\r\n  sortCompany(){\r\n    if(this.sortAscendingCompany)\r\n    {\r\n      this.allComment.sort((a, b) => a.name.charAt(0).localeCompare(b.name.charAt(0),undefined, { sensitivity: 'base' }));\r\n    }\r\n    else\r\n    {\r\n      this.allComment.sort((a, b) => b.name.charAt(0).localeCompare(a.name.charAt(0),undefined, { sensitivity: 'base' }));\r\n    }\r\n    this.sortAscendingCompany= !this.sortAscendingCompany\r\n\r\n  }\r\n  \r\n    //sort BrandManager\r\n  sortBrandManager(){\r\n    if(this.sortAscendingBrandManager)\r\n    {\r\n      this.allComment.sort((a, b) => a.brandManager.charAt(0).localeCompare(b.brandManager.charAt(0),undefined, { sensitivity: 'base' }));\r\n    }\r\n    else\r\n    {\r\n      this.allComment.sort((a, b) => b.brandManager.charAt(0).localeCompare(a.brandManager.charAt(0),undefined, { sensitivity: 'base' }));\r\n    }\r\n    this.sortAscendingBrandManager= !this.sortAscendingBrandManager\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n}\r\n","<app-header-user></app-header-user>\r\n<div class=\"px-[103px] pt-[40px] max-md:px-[24px] pb-[20px]\">\r\n    <div class=\"table-fixed px-[46px] py-[16px] rounded-[20px] w-full shadow-[0_4px_4px_rgba(0,0,0,0.25)] max-md:px-7 \" >\r\n        <div class=\"text-[26px] text-blue-3 font-medium font-urbanist max-md:text-[16px]\">USER</div>\r\n        <div class=\"relative overflow-x-auto py-[18px] max-md:overflow-scroll \">\r\n            <table class=\" w-full text-[19px] text-left \">\r\n                <thead class=\"text-lg text-white bg-blue-2 border-[1px] border-blue-2 rounded-lg  \">  \r\n                    <tr class=\"max-md:text-[14px] font-urbanist\">\r\n                        <th scope=\"col\" class=\"px-6 py-3\">\r\n                            <div>Comment</div>\r\n                        </th >\r\n                        <th>\r\n                            <div class=\" cursor-pointer px-6 py-3\" (click)=\"sortComment()\">\r\n                                <i class=\"ri-arrow-up-down-fill\"></i>\r\n                            </div>\r\n\r\n                        </th>\r\n                        <th scope=\"col\" class=\"px-6 py-3 \">\r\n                            <div class=\"flex justify-between items-center\">\r\n                                <div>Company</div>                         \r\n                                <div class=\"max-md:mx-3 cursor-pointer \" (click)=\"sortCompany()\">\r\n                                    <i class=\"ri-arrow-up-down-fill\"></i>\r\n                                </div>\r\n                            </div>\r\n                        </th >\r\n                        <th scope=\"col\" class=\"px-6 py-3 \">\r\n                            <div class=\"flex justify-between items-center\">\r\n                                <div>Brand Manager</div>\r\n                                <div class=\"max-md:mx-3  cursor-pointer\" (click)=\"sortBrandManager()\">\r\n                                    <i class=\"ri-arrow-up-down-fill\"></i>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                        </th >\r\n                        <th scope=\"col\" class=\"px-6 py-3\">\r\n                            <span class=\"sr-only\">Action</span>\r\n                        </th >\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr class=\"text-black-1 font-urbanist border-[1px] border-blue-1 max-md:text-sm\"*ngFor=\"let post of allComment | paginate:{\r\n                        itemsPerPage: tableSize,\r\n                        currentPage:page,\r\n                        totalItems:count\r\n\r\n                    }\" >\r\n                        <td scope=\"row\" class=\"px-6 py-4 font-sm \" colspan=\"2\">{{post.comment}}</td>\r\n                        <td class=\"px-6 py-4\">{{post.name}}</td>\r\n                        <td class=\"px-6 py-4\">{{post.brandManager}}</td>\r\n                        <td class=\"px-6 py-4\">\r\n                            <label class=\"switch\" (click)=\"handleClick($event, post.idcomment, post.status)\">\r\n                                <input type=\"checkbox\" [checked]=\"post.status\">\r\n                                <span class=\"slider\" [ngClass]=\"{'on': post.status, 'off': !post.status}\"></span>\r\n                              </label>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div class=\"pagination pt-[2px] pb-[51px] flex justify-end max-md:pb-3 max-md:justify-center\">\r\n            <pagination-controls\r\n                \r\n                previousLabel=\"Prev\"\r\n                nextLabel=\"Next\"\r\n                (pageChange)=\"onTableDataChange($event)\"\r\n            >\r\n\r\n            </pagination-controls>\r\n        </div>\r\n        \r\n    </div>\r\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}